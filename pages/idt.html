<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title id="pageTitle">Convoyrama | Generador de Licencia</title>
<meta name="description" content="Convoyrama">
<link rel="stylesheet" href="../assets/style.css">
<link rel="icon" href="../assets/images/favicon.png">
<link rel="apple-touch-icon" href="../assets/images/favicon.png">
<script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/dist/qrious.min.js"></script>
<script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js" crossorigin="anonymous"></script>
<style>
@font-face {
    font-family: 'Verdana';
    src: url('./verdana/Verdana.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
}
@font-face {
    font-family: 'Verdana-Bold';
    src: url('./verdana/Verdana-Bold.ttf') format('truetype');
    font-weight: 700;
    font-style: normal;
}
@font-face {
    font-family: 'Verdana-Italic';
    src: url('./verdana/Verdana-Italic.ttf') format('truetype');
    font-weight: 400;
    font-style: italic;
}
@font-face {
    font-family: 'Verdana-BoldItalic';
    src: url('./verdana/Verdana-BoldItalic.ttf') format('truetype');
    font-weight: 700;
    font-style: italic;
}
body {
    margin: 0;
    font-family: Arial, sans-serif;
    min-height: 100vh;
}
header {
    padding: 1rem;
    text-align: center;
    position: relative;
    z-index: 10;
    background: var(--accent-bg);
    border-bottom: 1px solid var(--border);
}
header p {
    font-size: clamp(1rem, 3vw, 1.2rem);
    font-family: Arial, sans-serif;
    margin: 0.5rem 0;
    color: #fff;
}
nav {
    padding: 0.5rem;
    text-align: center;
}
nav a, nav a:visited {
    text-decoration: none;
    margin: 0 1rem;
    font-size: clamp(0.9rem, 2.5vw, 1rem);
    color: #fff;
}
nav a:hover {
    text-decoration: underline;
}
.contenedor {
    display: flex;
    flex-direction: column;
    gap: 1rem;
    padding: 1rem;
    align-items: center;
    font-family: Arial, sans-serif;
    max-width: 100%;
    box-sizing: border-box;
}
.panel {
    width: 100%;
    max-width: 400px;
    font-size: clamp(0.8rem, 2.5vw, 0.9rem);
}
.panel h3 {
    margin: 0.5rem 0;
    font-size: clamp(0.9rem, 3vw, 1rem);
}
.input-group {
    margin: 0.5rem 0;
}
.input-group input, .input-group select {
    width: 100%;
    max-width: 400px;
    box-sizing: border-box;
    padding: 0.6rem;
    font-size: clamp(0.8rem, 2.5vw, 0.9rem);
    border: 1px solid #ccc;
    border-radius: 4px;
}
input[type="file"] {
    width: 100%;
    max-width: 400px;
    box-sizing: border-box;
    font-size: clamp(0.8rem, 2.5vw, 0.9rem);
    border: none;
    padding: 0.6rem 0;
}
.toggle-item {
    margin: 0.5rem 0;
}
.toggle-item input[type="checkbox"] {
    margin-right: 0.5rem;
}
.toggle-group {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    align-items: center;
    margin: 0.5rem 0;
}
canvas {
    width: 800px;
    height: 500px;
    display: block;
    max-width: 100%;
    height: auto;
}
#preview {
    width: 100%;
    text-align: center;
}
button {
    padding: 0.6rem 1.2rem;
    font-size: clamp(0.8rem, 2.5vw, 0.9rem);
    margin-top: 0.5rem;
    background: rgb(90, 165, 25);
    color: #fff;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    min-width: 140px;
    touch-action: manipulation;
}
button:hover {
    opacity: 0.8;
}
button.info-tooltip:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: #fff;
    padding: 0.5rem 1rem;
    border-radius: 4px;
    font-size: clamp(0.7rem, 2vw, 0.8rem);
    white-space: nowrap;
    z-index: 10;
}
.hidden {
    display: none;
}
#truckersmpStatus, #empresaLinkStatus {
    font-size: clamp(0.7rem, 2vw, 0.8rem);
    color: #555;
    margin-top: 0.3rem;
}
.valid {
    color: green;
}
.invalid {
    color: red;
}
#colorSlider, #saturationSlider {
    width: 70%;
    margin-top: 0.5rem;
    vertical-align: middle;
    height: 4px;
    background: #e0e0e0;
    border-radius: 3px;
    outline: none;
    transition: background 0.3s;
}
#colorSlider::-webkit-slider-thumb, #saturationSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 14px;
    height: 14px;
    background: rgb(90, 165, 25);
    border-radius: 50%;
    cursor: pointer;
    transition: background 0.3s;
}
#colorSlider::-webkit-slider-thumb:hover, #saturationSlider::-webkit-slider-thumb:hover {
    background: rgb(70, 130, 20);
}
#colorSlider::-moz-range-thumb, #saturationSlider::-moz-range-thumb {
    width: 14px;
    height: 14px;
    background: rgb(90, 165, 25);
    border-radius: 50%;
    cursor: pointer;
    border: none;
    transition: background 0.3s;
}
#colorSlider::-moz-range-thumb:hover, #saturationSlider::-moz-range-thumb:hover {
    background: rgb(70, 130, 20);
}
#colorValue, #saturationValue {
    display: inline-block;
    width: 15%;
    text-align: right;
    font-size: clamp(0.7rem, 2vw, 0.8rem);
    color: #555;
}
footer {
    margin: 1rem 0;
    text-align: center;
    font-size: clamp(0.7rem, 2vw, 0.8rem);
}
@media (min-width: 768px) {
    .contenedor {
        flex-direction: row;
        align-items: flex-start;
        justify-content: center;
    }
    .panel {
        max-width: 300px;
    }
}
@media (max-width: 767px) {
    canvas {
        max-width: 90vw;
        height: auto;
    }
    button {
        width: 100%;
        max-width: 300px;
    }
    nav a {
        margin: 0 0.5rem;
    }
}
</style>
</head>
<body>
<header>
    <nav>
        <a href="../index.html">Home</a>
        <a href="pc.html">Creador de Perfil</a>
        <a href="id.html" id="navLicense">Licencia</a>
    </nav>
    <p id="headerTitle">Generador de Licencia de Conductor</p>
</header>
<div class="contenedor">
    <div class="panel">
        <div class="input-group">
            <label for="languageToggle">Idioma / Language / LÃ­ngua:</label><br>
            <select id="languageToggle">
                <option value="es">EspaÃ±ol</option>
                <option value="en">English</option>
                <option value="pt">PortuguÃªs</option>
            </select>
        </div>
        <div class="input-group">
            <label for="customTitle" id="customTitleLabel">Cambiar tÃ­tulo:</label><br>
            <input type="text" id="customTitle" maxlength="36" placeholder="TÃ­tulo personalizado (mÃ¡x. 36 caracteres, opcional)">
        </div>
        <div class="input-group">
            <label for="nombre" id="nameLabel">Nombre:</label><br>
            <input type="text" id="nombre" placeholder="Nombre / Name / Nome" required>
        </div>
        <div class="input-group">
            <label for="pais" id="countryLabel">PaÃ­s:</label><br>
            <select id="pais" required>
                <option value="">Seleccione un paÃ­s / Select a country / Selecione um paÃ­s</option>
                <option value="AR|ðŸ‡¦ðŸ‡·|Argentina|Argentina|Argentina">ðŸ‡¦ðŸ‡· Argentina</option>
                <option value="AU|ðŸ‡¦ðŸ‡º|Australia|Australia|AustrÃ¡lia">ðŸ‡¦ðŸ‡º Australia</option>
                <option value="AT|ðŸ‡¦ðŸ‡¹|Austria|Austria|Ãustria">ðŸ‡¦ðŸ‡¹ Austria</option>
                <option value="BE|ðŸ‡§ðŸ‡ª|BÃ©lgica|Belgium|BÃ©lgica">ðŸ‡§ðŸ‡ª BÃ©lgica</option>
                <option value="BO|ðŸ‡§ðŸ‡´|Bolivia|Bolivia|BolÃ­via">ðŸ‡§ðŸ‡´ Bolivia</option>
                <option value="BR|ðŸ‡§ðŸ‡·|Brasil|Brazil|Brasil">ðŸ‡§ðŸ‡· Brasil</option>
                <option value="CA|ðŸ‡¨ðŸ‡¦|CanadÃ¡|Canada|CanadÃ¡">ðŸ‡¨ðŸ‡¦ CanadÃ¡</option>
                <option value="CL|ðŸ‡¨ðŸ‡±|Chile|Chile|Chile">ðŸ‡¨ðŸ‡± Chile</option>
                <option value="CN|ðŸ‡¨ðŸ‡³|China|China|China">ðŸ‡¨ðŸ‡³ China</option>
                <option value="CO|ðŸ‡¨ðŸ‡´|Colombia|Colombia|ColÃ´mbia">ðŸ‡¨ðŸ‡´ Colombia</option>
                <option value="CR|ðŸ‡¨ðŸ‡·|Costa Rica|Costa Rica|Costa Rica">ðŸ‡¨ðŸ‡· Costa Rica</option>
                <option value="HR|ðŸ‡­ðŸ‡·|Croacia|Croatia|CroÃ¡cia">ðŸ‡­ðŸ‡· Croacia</option>
                <option value="CU|ðŸ‡¨ðŸ‡º|Cuba|Cuba|Cuba">ðŸ‡¨ðŸ‡º Cuba</option>
                <option value="CZ|ðŸ‡¨ðŸ‡¿|RepÃºblica Checa|Czech Republic|RepÃºblica Tcheca">ðŸ‡¨ðŸ‡¿ RepÃºblica Checa</option>
                <option value="DK|ðŸ‡©ðŸ‡°|Dinamarca|Denmark|Dinamarca">ðŸ‡©ðŸ‡° Dinamarca</option>
                <option value="EC|ðŸ‡ªðŸ‡¨|Ecuador|Ecuador|Equador">ðŸ‡ªðŸ‡¨ Ecuador</option>
                <option value="EG|ðŸ‡ªðŸ‡¬|Egipto|Egypt|Egipto">ðŸ‡ªðŸ‡¬ Egipto</option>
                <option value="FI|ðŸ‡«ðŸ‡®|Finlandia|Finland|FinlÃ¢ndia">ðŸ‡«ðŸ‡® Finlandia</option>
                <option value="FR|ðŸ‡«ðŸ‡·|Francia|France|FranÃ§a">ðŸ‡«ðŸ‡· Francia</option>
                <option value="DE|ðŸ‡©ðŸ‡ª|Alemania|Germany|Alemanha">ðŸ‡¨ðŸ‡ª Alemania</option>
                <option value="GR|ðŸ‡¬ðŸ‡·|Grecia|Greece|GrÃ©cia">ðŸ‡¬ðŸ‡· Grecia</option>
                <option value="HU|ðŸ‡­ðŸ‡º|HungrÃ­a|Hungary|Hungria">ðŸ‡­ðŸ‡º HungrÃ­a</option>
                <option value="IN|ðŸ‡®ðŸ‡³|India|India|Ãndia">ðŸ‡®ðŸ‡³ India</option>
                <option value="ID|ðŸ‡®ðŸ‡©|Indonesia|Indonesia|IndonÃ©sia">ðŸ‡®ðŸ‡© Indonesia</option>
                <option value="IE|ðŸ‡®ðŸ‡ª|Irlanda|Ireland|Irlanda">ðŸ‡®ðŸ‡ª Irlanda</option>
                <option value="IT|ðŸ‡®ðŸ‡¹|Italia|Italy|ItÃ¡lia">ðŸ‡®ðŸ‡¹ Italia</option>
                <option value="JP|ðŸ‡¯ðŸ‡µ|JapÃ³n|Japan|JapÃ£o">ðŸ‡¯ðŸ‡µ JapÃ³n</option>
                <option value="KR|ðŸ‡°ðŸ‡·|Corea del Sur|South Korea|Coreia do Sul">ðŸ‡°ðŸ‡· Corea del Sur</option>
                <option value="MX|ðŸ‡²ðŸ‡½|MÃ©xico|Mexico|MÃ©xico">ðŸ‡²ðŸ‡½ MÃ©xico</option>
                <option value="NL|ðŸ‡³ðŸ‡±|PaÃ­ses Bajos|Netherlands|PaÃ­ses Baixos">ðŸ‡³ðŸ‡± PaÃ­ses Bajos</option>
                <option value="NZ|ðŸ‡³ðŸ‡¿|Nueva Zelanda|New Zealand|Nova ZelÃ¢ndia">ðŸ‡³ðŸ‡¿ Nueva Zelanda</option>
                <option value="NO|ðŸ‡³ðŸ‡´|Noruega|Norway|Noruega">ðŸ‡³ðŸ‡´ Noruega</option>
                <option value="PE|ðŸ‡µðŸ‡ª|PerÃº|Peru|Peru">ðŸ‡µðŸ‡ª PerÃº</option>
                <option value="PH|ðŸ‡µðŸ‡­|Filipinas|Philippines|Filipinas">ðŸ‡µðŸ‡­ Filipinas</option>
                <option value="PL|ðŸ‡µðŸ‡±|Polonia|Poland|PolÃ´nia">ðŸ‡µðŸ‡± Polonia</option>
                <option value="PT|ðŸ‡µðŸ‡¹|Portugal|Portugal|Portugal">ðŸ‡µðŸ‡¹ Portugal</option>
                <option value="RO|ðŸ‡·ðŸ‡´|Rumania|Romania|RomÃªnia">ðŸ‡·ðŸ‡´ Rumania</option>
                <option value="RU|ðŸ‡·ðŸ‡º|Rusia|Russia|RÃºssia">ðŸ‡·ðŸ‡º Rusia</option>
                <option value="SG|ðŸ‡¸ðŸ‡¬|Singapur|Singapore|Singapura">ðŸ‡¸ðŸ‡¬ Singapur</option>
                <option value="ZA|ðŸ‡¿ðŸ‡¦|SudÃ¡frica|South Africa|Ãfrica do Sul">ðŸ‡¿ðŸ‡¦ SudÃ¡frica</option>
                <option value="ES|ðŸ‡ªðŸ‡¸|EspaÃ±a|Spain|Espanha">ðŸ‡ªðŸ‡¸ EspaÃ±a</option>
                <option value="SE|ðŸ‡¸ðŸ‡ª|Suecia|Sweden|SuÃ©cia">ðŸ‡¸ðŸ‡ª Suecia</option>
                <option value="CH|ðŸ‡¨ðŸ‡­|Suiza|Switzerland|SuÃ­Ã§a">ðŸ‡¨ðŸ‡­ Suiza</option>
                <option value="TH|ðŸ‡¹ðŸ‡­|Tailandia|Thailand|TailÃ¢ndia">ðŸ‡¹ðŸ‡­ Tailandia</option>
                <option value="TR|ðŸ‡¹ðŸ‡·|TurquÃ­a|Turkey|Turquia">ðŸ‡¹ðŸ‡· TurquÃ­a</option>
                <option value="UA|ðŸ‡ºðŸ‡¦|Ucrania|Ukraine|UcrÃ¢nia">ðŸ‡ºðŸ‡¦ Ucrania</option>
                <option value="GB|ðŸ‡¬ðŸ‡§|Reino Unido|United Kingdom|Reino Unido">ðŸ‡¬ðŸ‡§ Reino Unido</option>
                <option value="US|ðŸ‡ºðŸ‡¸|Estados Unidos|United States|Estados Unidos">ðŸ‡ºðŸ‡¸ Estados Unidos</option>
                <option value="UY|ðŸ‡ºðŸ‡¾|Uruguay|Uruguay|Uruguai">ðŸ‡ºðŸ‡¾ Uruguay</option>
                <option value="VE|ðŸ‡»ðŸ‡ª|Venezuela|Venezuela|Venezuela">ðŸ‡»ðŸ‡ª Venezuela</option>
            </select>
        </div>
        <div class="input-group">
            <label for="truckersmpLink" id="truckersmpLinkLabel">Enlace Perfil en TMP:</label><br>
            <input type="text" id="truckersmpLink" placeholder="TruckersMP Profile Link" required>
            <div id="truckersmpStatus"></div>
        </div>
        <div class="input-group">
            <label for="empresaLink" id="companyLinkLabel">Enlace Perfil Empresa en TMP:</label><br>
            <input type="text" id="empresaLink" placeholder="TruckersMP Company Profile Link" required>
            <div id="empresaLinkStatus"></div>
        </div>
        <div class="input-group">
            <label for="foto" id="photoLabel">Foto (Opcional):</label><br>
            <input type="file" id="foto" accept="image/*">
        </div>
        <div class="input-group">
            <label for="vtcLogo" id="vtcLogoLabel">Logo VTC (Opcional):</label><br>
            <input type="file" id="vtcLogo" accept="image/*">
        </div>
        <div class="input-group hidden" id="nicknameGroup">
            <label for="nickname" id="nicknameLabel">TAG Ã‰pico:</label><br>
            <select id="nickname">
                <option value="">Seleccione un TAG</option>
                <option value="ReyDelLag">ReyDelLag</option>
                <option value="FrenadorEnCurva">FrenadorEnCurva</option>
                <option value="SeÃ±orDelLagazo">SeÃ±orDelLagazo</option>
                <option value="BocinaLoca">BocinaLoca</option>
                <option value="CargadorDeDeudas">CargadorDeDeudas</option>
                <option value="CamioneroDelApagÃ³n">CamioneroDelApagÃ³n</option>
                <option value="FugitivoDeLaRuta">FugitivoDeLaRuta</option>
                <option value="MaestroDelPing">MaestroDelPing</option>
                <option value="ReyDeLaCarretera">ReyDeLaCarretera</option>
                <option value="LocoDelVolante">LocoDelVolante</option>
                <option value="SobrevivienteDelBan">SobrevivienteDelBan</option>
                <option value="BanEvasor">BanEvasor</option>
                <option value="FrenazoEstelar">FrenazoEstelar</option>
                <option value="TerrorDeCalais">TerrorDeCalais</option>
                <option value="LagLegendario">LagLegendario</option>
                <option value="SobrevivienteDeKirkenes">SobrevivienteDeKirkenes</option>
                <option value="MaestroDelReckless">MaestroDelReckless</option>
                <option value="PingParalizante">PingParalizante</option>
                <option value="RutaSinRetorno">RutaSinRetorno</option>
                <option value="VolanteEndemoniado">VolanteEndemoniado</option>
                <option value="AsDelReporte">AsDelReporte</option>
                <option value="ReyDeDuisburg">ReyDeDuisburg</option>
                <option value="ReyDeCalais">ReyDeCalais</option>
                <option value="KaosEnLaRuta">KaosEnLaRuta</option>
                <option value="CarreteraPerdida">CarreteraPerdida</option>
                <option value="FrenadorDePÃ¡nico">FrenadorDePÃ¡nico</option>
                <option value="CargaConDrama">CargaConDrama</option>
            </select>
        </div>
        <div class="toggle-item hidden" id="titleToggleGroup">
            <label for="titleToggle" id="titleToggleLabel">Usar tÃ­tulo cÃ³mico:</label><br>
            <input type="checkbox" id="titleToggle">
        </div>
        <div class="toggle-group">
            <div class="toggle-item"><label for="promodsToggle">ProMods:</label><input type="checkbox" id="promodsToggle"></div>
            <div class="toggle-item"><label for="dbusworldToggle">DBUS:</label><input type="checkbox" id="dbusworldToggle"></div>
            <div class="toggle-item"><label for="watermarkToggle" id="watermarkToggleLabel">Usar marca de agua:</label><input type="checkbox" id="watermarkToggle" checked></div>
        </div>
    </div>
    <div id="preview">
        <canvas id="canvas" width="800" height="500"></canvas>
        <div class="input-group">
            <label for="colorSlider" id="colorLabel">Tono del fondo:</label><br>
            <input type="range" id="colorSlider" min="0" max="360" value="0"><span id="colorValue">0Â°</span>
        </div>
        <div class="input-group">
            <label for="saturationSlider" id="saturationLabel">SaturaciÃ³n:</label><br>
            <input type="range" id="saturationSlider" min="0" max="200" value="100"><span id="saturationValue">100%</span>
        </div>
        <br>
        <a id="descargar" download="driver_license.png">
            <button id="botonDescargar" class="info-tooltip" data-tooltip="Esta licencia es una broma y un guiÃ±o a la comunidad, no pretende ser profesional ni seria.">Descargar Licencia</button>
        </a>
    </div>
</div>
<footer><small>Â© LAG'S SPEED - CONVOYRAMA 2025 - v1.2</small></footer>
<script>
function debounce(func, wait) {
    let timeout;
    return function (...args) {
        const later = () => {
            clearTimeout(timeout);
            func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
    };
}
const debouncedGenerateImage = debounce(generateImage, 200);
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const config = {
    color: "white",
    flagSize: 80,
    photoX: 45,
    photoY: 80,
    labelX: 100,
    colonX: 130,
    textX: 295,
    textY: 334,
    qrX: 573,
    qrY: 101,
    flagX: 580,
    flagY: 206,
    font: "'Verdana', sans-serif",
    defaultPhotoSize: 192,
    qrSize: 100,
    qrSpacing: 10,
    promodsX: 20,
    promodsY: 334,
    dbusworldX: 20,
    dbusworldY: 394,
    logoWidth: 67,
    logoHeight: 50,
    vtcLogoSize: 100
};
const translations = {
    es: {
        pageTitle: "Convoyrama | Generador de Licencia",
        headerTitle: "Generador de Licencia de Conductor",
        navLicense: "Licencia",
        nameLabel: "Nombre:",
        nicknameLabel: "TAG Ã‰pico:",
        titleToggleLabel: "Usar tÃ­tulo cÃ³mico:",
        photoLabel: "Foto (Opcional):",
        countryLabel: "PaÃ­s:",
        companyLinkLabel: "Enlace Perfil Empresa en TMP:",
        truckersmpLinkLabel: "Enlace Perfil en TMP:",
        customTitleLabel: "Cambiar tÃ­tulo:",
        watermarkToggleLabel: "Usar marca de agua:",
        vtcLogoLabel: "Logo VTC (Opcional):",
        colorLabel: "Tono del fondo:",
        saturationLabel: "SaturaciÃ³n:",
        customTitlePlaceholder: "TÃ­tulo personalizado (mÃ¡x. 36 caracteres, opcional)",
        validLink: "Enlace vÃ¡lido",
        invalidLink: "Enlace invÃ¡lido: debe ser https://truckersmp.com/user/[...]",
        validCompanyLink: "Enlace de empresa vÃ¡lido",
        invalidCompanyLink: "Enlace invÃ¡lido: debe ser https://truckersmp.com/vtc/[...]",
        downloadButton: "Descargar Licencia",
        canvasName: "Nombre :",
        canvasLicenseNo: "NÃºm. Licencia :",
        canvasDate: "Fecha :",
        canvasCountry: "PaÃ­s :",
        canvasTag: "TAG :",
        titleNormal: "PERMISO DE CONDUCCIÃ“N INTERNACIONAL",
        titleComedic: "PERMISO PARA CHOCAR EN CONVOY",
        countryPlaceholder: "Seleccione un paÃ­s",
        tooltipMessage: "Esta licencia es una broma y un guiÃ±o a la comunidad, no pretende ser profesional ni seria."
    },
    en: {
        pageTitle: "Convoyrama | Driver License Generator",
        headerTitle: "Driver License Generator",
        navLicense: "License",
        nameLabel: "Name:",
        nicknameLabel: "Epic TAG:",
        titleToggleLabel: "Use comedic title:",
        photoLabel: "Photo (Optional):",
        countryLabel: "Country:",
        companyLinkLabel: "TruckersMP Company Profile Link:",
        truckersmpLinkLabel: "TruckersMP Profile Link:",
        customTitleLabel: "Change title:",
        watermarkToggleLabel: "Use watermark:",
        vtcLogoLabel: "VTC Logo (Optional):",
        colorLabel: "Background hue:",
        saturationLabel: "Saturation:",
        customTitlePlaceholder: "Custom title (max 36 characters, optional)",
        validLink: "Valid link",
        invalidLink: "Invalid link: must be https://truckersmp.com/user/[...]",
        validCompanyLink: "Valid company link",
        invalidCompanyLink: "Invalid link: must be https://truckersmp.com/vtc/[...]",
        downloadButton: "Download License",
        canvasName: "Name :",
        canvasLicenseNo: "License No. :",
        canvasDate: "Date :",
        canvasCountry: "Country :",
        canvasTag: "TAG :",
        titleNormal: "INTERNATIONAL DRIVING LICENSE",
        titleComedic: "CONVOY CRASHING PERMIT",
        countryPlaceholder: "Select a country",
        tooltipMessage: "This license is a joke and a nod to the community, not intended to be professional or serious."
    },
    pt: {
        pageTitle: "Convoyrama | Gerador de LicenÃ§a",
        headerTitle: "Gerador de LicenÃ§a de Motorista",
        navLicense: "LicenÃ§a",
        nameLabel: "Nome:",
        nicknameLabel: "TAG Ã‰pico:",
        titleToggleLabel: "Usar tÃ­tulo cÃ´mico:",
        photoLabel: "Foto (Opcional):",
        countryLabel: "PaÃ­s:",
        companyLinkLabel: "Link do Perfil da Empresa no TruckersMP:",
        truckersmpLinkLabel: "Link do Perfil no TruckersMP:",
        customTitleLabel: "Alterar tÃ­tulo:",
        watermarkToggleLabel: "Usar marca d'Ã¡gua:",
        vtcLogoLabel: "Logo VTC (Opcional):",
        colorLabel: "Tom do fundo:",
        saturationLabel: "SaturaÃ§Ã£o:",
        customTitlePlaceholder: "TÃ­tulo personalizado (mÃ¡x. 36 caracteres, opcional)",
        validLink: "Link vÃ¡lido",
        invalidLink: "Link invÃ¡lido: deve ser https://truckersmp.com/user/[...]",
        validCompanyLink: "Link de empresa vÃ¡lido",
        invalidCompanyLink: "Link invÃ¡lido: debe ser https://truckersmp.com/vtc/[...]",
        downloadButton: "Baixar LicenÃ§a",
        canvasName: "Nome :",
        canvasLicenseNo: "NÂº da LicenÃ§a :",
        canvasDate: "Data :",
        canvasCountry: "PaÃ­s :",
        canvasTag: "TAG :",
        titleNormal: "LICENÃ‡A INTERNACIONAL DE CONDUÃ‡ÃƒO",
        titleComedic: "PERMISSÃƒO PARA CAUSAR CAOS EM COMBOIO",
        countryPlaceholder: "Selecione um paÃ­s",
        tooltipMessage: "Esta licenÃ§a Ã© uma brincadeira e uma homenagem Ã  comunidade, nÃ£o pretende ser profissional ou sÃ©ria."
    }
};
const nameInput = document.getElementById("nombre");
const photoInput = document.getElementById("foto");
const vtcLogoInput = document.getElementById("vtcLogo");
const countrySelect = document.getElementById("pais");
const nicknameSelect = document.getElementById("nickname");
const companyLinkInput = document.getElementById("empresaLink");
const truckersmpLinkInput = document.getElementById("truckersmpLink");
const truckersmpStatus = document.getElementById("truckersmpStatus");
const companyLinkStatus = document.getElementById("empresaLinkStatus");
const nicknameGroup = document.getElementById("nicknameGroup");
const titleToggleGroup = document.getElementById("titleToggleGroup");
const titleToggleInput = document.getElementById("titleToggle");
const promodsToggleInput = document.getElementById("promodsToggle");
const dbusworldToggleInput = document.getElementById("dbusworldToggle");
const watermarkToggleInput = document.getElementById("watermarkToggle");
const languageSelect = document.getElementById("languageToggle");
const colorSlider = document.getElementById("colorSlider");
const colorValue = document.getElementById("colorValue");
const saturationSlider = document.getElementById("saturationSlider");
const saturationValue = document.getElementById("saturationValue");
const downloadButton = document.getElementById("botonDescargar");
const customTitleInput = document.getElementById("customTitle");
let userImage = null;
let vtcLogoImage = null;
let isNicknameUnlocked = localStorage.getItem("nicknameUnlocked") === "true";
let currentDate = null;
let lastDateFetch = 0;
let isDateFromInternet = false;
const DATE_CACHE_DURATION = 180000;
let currentLanguage = "es";
let lastFormState = {};
function getFlagEmoji(countryCode) {
    if (!countryCode || countryCode === "") return null;
    const codePoints = countryCode.toUpperCase().split("").map(char => 0x1F1E6 + char.charCodeAt(0) - 65);
    return String.fromCodePoint(...codePoints);
}
async function renderTwemoji(emoji, size) {
    return new Promise((resolve, reject) => {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = () => {
            console.log(`Emoji cargado correctamente: ${emoji}`);
            resolve(img);
        };
        img.onerror = () => {
            console.error(`Error al cargar emoji: ${emoji}`);
            resolve(null);
        };
        const parsed = twemoji.parse(emoji, { folder: 'svg', ext: '.svg' });
        const src = parsed.match(/src="([^"]+)"/)?.[1] || "";
        if (!src) {
            console.error(`No se pudo parsear el emoji: ${emoji}`);
            resolve(null);
        } else {
            img.src = src;
        }
    });
}
async function getCurrentDate() {
    const now = Date.now();
    if (currentDate && now - lastDateFetch < DATE_CACHE_DURATION) return currentDate;
    const apis = [
        {
            url: 'https://worldtimeapi.org/api/timezone/Etc/UTC',
            parse: data => {
                const date = new Date(data.datetime);
                return {
                    day: date.getDate().toString().padStart(2, "0"),
                    month: (date.getMonth() + 1).toString().padStart(2, "0"),
                    year: date.getFullYear()
                };
            }
        },
        {
            url: 'https://timeapi.io/api/Time/current/utc',
            parse: data => ({
                day: data.day.toString().padStart(2, "0"),
                month: data.month.toString().padStart(2, "0"),
                year: data.year
            })
        },
        {
            url: 'https://worldclockapi.herokuapp.com/api/json/utc/now',
            parse: data => {
                const date = new Date(data.currentDateTime);
                return {
                    day: date.getDate().toString().padStart(2, "0"),
                    month: (date.getMonth() + 1).toString().padStart(2, "0"),
                    year: date.getFullYear()
                };
            }
        }
    ];
    for (const api of apis) {
        try {
            const response = await fetch(api.url);
            const data = await response.json();
            const { day, month, year } = api.parse(data);
            currentDate = `${day}/${month}/${year}`;
            lastDateFetch = now;
            isDateFromInternet = true;
            return currentDate;
        } catch (error) {}
    }
    const date = new Date();
    currentDate = `${date.getDate().toString().padStart(2, "0")}/${(date.getMonth() + 1).toString().padStart(2, "0")}/${date.getFullYear()}`;
    lastDateFetch = now;
    isDateFromInternet = false;
    return currentDate;
}
function updateLanguage(lang) {
    currentLanguage = lang;
    const trans = translations[lang];
    const nameIndex = { es: 2, en: 3, pt: 4 }[lang];
    document.getElementById("pageTitle").textContent = trans.pageTitle;
    document.getElementById("headerTitle").textContent = trans.headerTitle;
    document.getElementById("navLicense").textContent = trans.navLicense;
    document.getElementById("nameLabel").textContent = trans.nameLabel;
    document.getElementById("nicknameLabel").textContent = trans.nicknameLabel;
    document.getElementById("titleToggleLabel").textContent = trans.titleToggleLabel;
    document.getElementById("photoLabel").textContent = trans.photoLabel;
    document.getElementById("countryLabel").textContent = trans.countryLabel;
    document.getElementById("companyLinkLabel").textContent = trans.companyLinkLabel;
    document.getElementById("truckersmpLinkLabel").textContent = trans.truckersmpLinkLabel;
    document.getElementById("customTitleLabel").textContent = trans.customTitleLabel;
    document.getElementById("watermarkToggleLabel").textContent = trans.watermarkToggleLabel;
    document.getElementById("vtcLogoLabel").textContent = trans.vtcLogoLabel;
    document.getElementById("colorLabel").textContent = trans.colorLabel;
    document.getElementById("saturationLabel").textContent = trans.saturationLabel;
    document.getElementById("botonDescargar").textContent = trans.downloadButton;
    document.getElementById("botonDescargar").setAttribute("data-tooltip", trans.tooltipMessage);
    countrySelect.options[0].text = trans.countryPlaceholder;
    customTitleInput.placeholder = trans.customTitlePlaceholder;
    const options = Array.from(countrySelect.options).slice(1);
    options.sort((a, b) => a.text.split(" ")[1].localeCompare(b.text.split(" ")[1]));
    countrySelect.innerHTML = '<option value="">' + trans.countryPlaceholder + '</option>';
    options.forEach(opt => {
        const data = opt.value.split("|");
        const newOpt = document.createElement("option");
        newOpt.value = opt.value;
        newOpt.text = data[1] + " " + data[nameIndex];
        countrySelect.add(newOpt);
    });
    const truckersmpLink = truckersmpLinkInput.value.trim();
    const companyLink = companyLinkInput.value.trim();
    if (truckersmpLink) validateTruckersmpLink(truckersmpLink);
    if (companyLink) validateCompanyLink(companyLink);
    debouncedGenerateImage();
}
function generateLicenseNumber(name, country, truckersmpLink) {
    const countryCode = country.split("|")[0].substring(0, 2) || "XX";
    let userId = "";
    if (truckersmpLink) {
        const match = truckersmpLink.match(/truckersmp\.com\/user\/(.+)/);
        userId = match ? match[1] : "";
    }
    return userId ? `${countryCode}${userId}` : "";
}
function validateTruckersmpLink(link) {
    const regex = /^https:\/\/truckersmp\.com\/user\/.+$/;
    const trans = translations[currentLanguage];
    if (!regex.test(link)) {
        truckersmpStatus.textContent = trans.invalidLink;
        truckersmpStatus.className = "invalid";
        return false;
    }
    truckersmpStatus.textContent = trans.validLink;
    truckersmpStatus.className = "valid";
    return true;
}
function validateCompanyLink(link) {
    const regex = /^https:\/\/truckersmp\.com\/vtc\/.+$/;
    const trans = translations[currentLanguage];
    if (!regex.test(link)) {
        companyLinkStatus.textContent = trans.invalidCompanyLink;
        companyLinkStatus.className = "invalid";
        return false;
    }
    companyLinkStatus.textContent = trans.validCompanyLink;
    companyLinkStatus.className = "valid";
    return true;
}
function saveDefaultCountry() {
    localStorage.setItem("defaultCountry", countrySelect.value);
}
function loadDefaultCountry() {
    const savedCountry = localStorage.getItem("defaultCountry");
    if (savedCountry) countrySelect.value = savedCountry;
}
function updateForm() {
    const name = nameInput.value.toLowerCase().trim();
    if (name === "resetnick") {
        isNicknameUnlocked = false;
        localStorage.removeItem("nicknameUnlocked");
    } else if (["convoyrama", "nocturnoverso"].includes(name)) {
        isNicknameUnlocked = true;
        localStorage.setItem("nicknameUnlocked", "true");
    }
    nicknameGroup.classList.toggle("hidden", !isNicknameUnlocked);
    titleToggleGroup.classList.toggle("hidden", !isNicknameUnlocked);
    const companyLink = companyLinkInput.value.trim();
    if (companyLink) validateCompanyLink(companyLink);
    debouncedGenerateImage();
}
function getFormState() {
    return {
        name: nameInput.value,
        country: countrySelect.value,
        nickname: nicknameSelect.value,
        truckersmpLink: truckersmpLinkInput.value,
        companyLink: companyLinkInput.value,
        titleToggle: titleToggleInput.checked,
        promodsToggle: promodsToggleInput.checked,
        dbusworldToggle: dbusworldToggleInput.checked,
        watermarkToggle: watermarkToggleInput.checked,
        userImage: userImage ? userImage.src : null,
        vtcLogoImage: vtcLogoImage ? vtcLogoImage.src : null,
        language: currentLanguage,
        colorHue: colorSlider.value,
        saturation: saturationSlider.value,
        customTitle: customTitleInput.value
    };
}
async function generateImage() {
    const formState = getFormState();
    if (JSON.stringify(formState) === JSON.stringify(lastFormState)) return;
    lastFormState = formState;
    const trans = translations[currentLanguage];
    const nameIndex = { es: 2, en: 3, pt: 4 }[currentLanguage];
    const name = nameInput.value || (currentLanguage === "es" ? "Sin nombre" : currentLanguage === "en" ? "No name" : "Sem nome");
    const countryData = countrySelect.value.split("|");
    const countryCode = countryData[0] || "XX";
    const flagEmoji = countryData[1] || "";
    const countryName = countryData[nameIndex] || (currentLanguage === "es" ? "Sin paÃ­s" : currentLanguage === "en" ? "No country" : "Sem paÃ­s");
    const nickname = nicknameSelect.value || "";
    const truckersmpLink = truckersmpLinkInput.value.trim();
    const companyLink = companyLinkInput.value.trim();
    const isTruckersmpValid = truckersmpLink ? validateTruckersmpLink(truckersmpLink) : false;
    const isCompanyValid = companyLink ? validateCompanyLink(companyLink) : false;
    const hueRotate = parseInt(colorSlider.value);
    const saturation = parseInt(saturationSlider.value);
    canvas.width = 800;
    canvas.height = 500;
    ctx.imageSmoothingEnabled = true;
    ctx.imageSmoothingQuality = "high";
    ctx.save();
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.font = null;
    ctx.fillStyle = null;
    ctx.textAlign = "start";
    ctx.textBaseline = "alphabetic";
    ctx.shadowColor = "transparent";
    ctx.globalCompositeOperation = "source-over";
    const templateImage = new Image();
    templateImage.src = "./assets/images/license_template.png";
    const languageImageSrc = { es: './assets/images/es.png', en: './assets/images/en.png', pt: './assets/images/pt.png' }[currentLanguage];
    const languageImage = new Image();
    languageImage.src = languageImageSrc;
    const [templateImg, languageImg, defaultPhoto, flagImg, idImg, promodsImg, dbusworldImg] = await Promise.all([
        new Promise(resolve => { templateImage.onload = () => resolve(templateImage); templateImage.onerror = () => resolve(null); }),
        new Promise(resolve => { languageImage.onload = () => resolve(languageImage); languageImage.onerror = () => resolve(null); }),
        userImage ? Promise.resolve(null) : renderTwemoji("ðŸ‘¤", config.defaultPhotoSize),
        flagEmoji ? renderTwemoji(flagEmoji, config.flagSize) : Promise.resolve(null),
        isTruckersmpValid ? new Promise(resolve => { const img = new Image(); img.src = "./assets/images/id.svg"; img.onload = () => resolve(img); img.onerror = () => resolve(null); }) : Promise.resolve(null),
        promodsToggleInput.checked ? new Promise(resolve => { const img = new Image(); img.src = "./assets/images/promods.png"; img.onload = () => resolve(img); img.onerror = () => resolve(null); }) : Promise.resolve(null),
        dbusworldToggleInput.checked ? new Promise(resolve => { const img = new Image(); img.src = "./assets/images/dbusworld.png"; img.onload = () => resolve(img); img.onerror = () => resolve(null); }) : Promise.resolve(null)
    ]);
    if (templateImg) {
        ctx.filter = `hue-rotate(${hueRotate}deg) saturate(${saturation}%)`;
        ctx.drawImage(templateImg, 0, 0, 800, 500);
        ctx.filter = "none";
    } else {
        ctx.fillStyle = "#fff";
        ctx.fillRect(0, 0, 800, 500);
    }
    if (languageImg) ctx.drawImage(languageImg, 0, 0, 800, 500);
    ctx.font = "bold 30px 'Verdana-Bold'";
    ctx.fillStyle = "#fff";
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";
    ctx.fillText(customTitleInput.value.trim() || "TRUCKERSMP", 400, 40.77);
    if (userImage) {
        ctx.drawImage(userImage, config.photoX, config.photoY, config.defaultPhotoSize, config.defaultPhotoSize);
    } else if (defaultPhoto) {
        ctx.drawImage(defaultPhoto, config.photoX, config.photoY, config.defaultPhotoSize, config.defaultPhotoSize);
    }
    if (flagImg) {
        const flagX = config.flagX;
        ctx.drawImage(flagImg, flagX, config.flagY, config.flagSize, config.flagSize);
    }
    if (vtcLogoImage) {
        const vtcLogoX = config.qrX - 2 * config.qrSize - 2 * config.qrSpacing;
        ctx.drawImage(vtcLogoImage, vtcLogoX, config.qrY, config.vtcLogoSize, config.vtcLogoSize);
    }
    const currentDateStr = await getCurrentDate();
    ctx.font = `bold 24px ${config.font}`;
    ctx.fillStyle = config.color;
    ctx.textAlign = "left";
    ctx.textBaseline = "alphabetic";
    const lineHeight = 24 * 1.2;
    ctx.fillText(trans.canvasName, config.labelX, config.textY);
    ctx.fillText(trans.canvasLicenseNo, config.labelX, config.textY + lineHeight);
    ctx.fillText(trans.canvasDate, config.labelX, config.textY + lineHeight * 2);
    ctx.fillText(trans.canvasCountry, config.labelX, config.textY + lineHeight * 3);
    if (isNicknameUnlocked && nickname) ctx.fillText(trans.canvasTag, config.labelX, config.textY + lineHeight * 4);
    ctx.fillText(name, config.textX, config.textY);
    if (name && name.trim() != "" && countrySelect.value && isTruckersmpValid) {
        const licenseNumber = generateLicenseNumber(name, countrySelect.value, truckersmpLink);
        if (licenseNumber) ctx.fillText(licenseNumber, config.textX, config.textY + lineHeight);
    }
    ctx.fillText(currentDateStr, config.textX, config.textY + lineHeight * 2);
    ctx.fillText(isDateFromInternet ? "âœ“" : "âœ—", config.textX + ctx.measureText(currentDateStr).width + 5, config.textY + lineHeight * 2);
    ctx.fillText(countryName, config.textX, config.textY + lineHeight * 3);
    if (isNicknameUnlocked && nickname) ctx.fillText(nickname, config.textX, config.textY + lineHeight * 4);
    if (promodsImg && promodsToggleInput.checked) {
        ctx.drawImage(promodsImg, config.promodsX, config.promodsY, config.logoWidth, config.logoHeight);
    }
    if (dbusworldImg && dbusworldToggleInput.checked) {
        const dbusworldY = promodsToggleInput.checked ? config.dbusworldY : config.promodsY;
        ctx.drawImage(dbusworldImg, config.dbusworldX, dbusworldY, config.logoWidth, config.logoHeight);
    }
    const starMap = {
        "https://truckersmp.com/user/627943": 2,
        "https://truckersmp.com/user/5441056": 1,
        "https://truckersmp.com/user/5429829": 3,
        "https://truckersmp.com/user/5408877": 1,
        "https://truckersmp.com/user/5379466": 3,
        "https://truckersmp.com/user/5861450": 2,
        "https://truckersmp.com/user/4690862": 3,
        "https://truckersmp.com/user/1432064": 2,
        "https://truckersmp.com/user/4890784": 2
    };
    const starCount = starMap[truckersmpLink] || 0;
    if (starCount > 0) {
        ctx.font = `bold 24px ${config.font}`;
        ctx.fillStyle = "#FFD700";
        ctx.textAlign = "right";
        const starX = 800 - 20;
        for (let i = 0; i < starCount; i++) {
            const starY = config.promodsY + i * 24;
            ctx.fillText("â˜…", starX, starY);
        }
        ctx.filter = "none";
    }
    const titleText = isNicknameUnlocked && titleToggleInput.checked ? trans.titleComedic : trans.titleNormal;
    const titleY = 500 - 5;
    ctx.font = `bold 22px ${config.font}`;
    ctx.fillStyle = "rgb(240,240,240)";
    ctx.textAlign = "center";
    ctx.textBaseline = "bottom";
    ctx.shadowColor = "rgb(0,0,0)";
    ctx.shadowOffsetX = 1;
    ctx.shadowOffsetY = 1;
    ctx.shadowBlur = 2;
    ctx.fillText(titleText, 400, titleY);
    ctx.shadowColor = "transparent";
    if (isTruckersmpValid) {
        const qr = new QRious({ value: truckersmpLink, size: config.qrSize, level: 'H' });
        const qrCanvas = document.createElement("canvas");
        qrCanvas.width = config.qrSize;
        qrCanvas.height = config.qrSize;
        qrCanvas.getContext("2d").drawImage(qr.canvas, 0, 0);
        ctx.drawImage(qrCanvas, config.qrX, config.qrY, config.qrSize, config.qrSize);
        if (idImg) ctx.drawImage(idImg, config.qrX + config.qrSize + config.qrSpacing, config.qrY, config.qrSize, config.qrSize);
    }
    if (isCompanyValid) {
        const qrCompany = new QRious({ value: companyLink, size: config.qrSize, level: 'H' });
        const qrCompanyCanvas = document.createElement("canvas");
        qrCompanyCanvas.width = config.qrSize;
        qrCompanyCanvas.height = config.qrSize;
        qrCompanyCanvas.getContext("2d").drawImage(qrCompany.canvas, 0, 0);
        ctx.drawImage(qrCompanyCanvas, config.qrX - config.qrSize - config.qrSpacing, config.qrY, config.qrSize, config.qrSize);
    }
    if (vtcLogoImage && watermarkToggleInput.checked) {
        const centerX = (canvas.width - 180) / 2 + 150;
        const centerY = (canvas.height - 180) / 2 + 100;
        ctx.globalAlpha = 0.1;
        ctx.drawImage(vtcLogoImage, centerX, centerY, 180, 180);
        ctx.globalAlpha = 1;
    }
    ctx.restore();
    try {
        updateDownloadLink();
    } catch (error) {
        console.error("Error generating download link:", error);
    }
}
function updateDownloadLink() {
    const downloadLink = document.getElementById("descargar");
    const name = nameInput.value || "unknown";
    try {
        downloadLink.href = canvas.toDataURL("image/png");
        downloadLink.download = `driver_license_${name}.png`;
    } catch (error) {
        downloadLink.href = "#";
        downloadLink.download = "";
        console.error("Error in toDataURL:", error);
    }
}
photoInput.addEventListener("change", event => {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = ev => {
            userImage = new Image();
            userImage.src = ev.target.result;
            userImage.crossOrigin = "anonymous";
            userImage.onload = debouncedGenerateImage;
        };
        reader.readAsDataURL(file);
    } else {
        userImage = null;
        debouncedGenerateImage();
    }
});
vtcLogoInput.addEventListener("change", event => {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = ev => {
            vtcLogoImage = new Image();
            vtcLogoImage.src = ev.target.result;
            vtcLogoImage.crossOrigin = "anonymous";
            vtcLogoImage.onload = debouncedGenerateImage;
        };
        reader.readAsDataURL(file);
    } else {
        vtcLogoImage = null;
        debouncedGenerateImage();
    }
});
truckersmpLinkInput.addEventListener("input", () => {
    const link = truckersmpLinkInput.value.trim();
    if (link) {
        validateTruckersmpLink(link);
    } else {
        truckersmpStatus.textContent = "";
        truckersmpStatus.className = "";
    }
    debouncedGenerateImage();
});
companyLinkInput.addEventListener("input", () => {
    const link = companyLinkInput.value.trim();
    if (link) {
        validateCompanyLink(link);
    } else {
        companyLinkStatus.textContent = "";
        companyLinkStatus.className = "";
    }
    debouncedGenerateImage();
});
languageSelect.addEventListener("change", () => updateLanguage(languageSelect.value));
colorSlider.addEventListener("input", () => {
    colorValue.textContent = `${colorSlider.value}Â°`;
    debouncedGenerateImage();
});
saturationSlider.addEventListener("input", () => {
    saturationValue.textContent = `${saturationSlider.value}%`;
    debouncedGenerateImage();
});
watermarkToggleInput.addEventListener("change", debouncedGenerateImage);
nameInput.addEventListener("input", updateForm);
countrySelect.addEventListener("change", () => {
    saveDefaultCountry();
    debouncedGenerateImage();
});
nicknameSelect.addEventListener("change", debouncedGenerateImage);
titleToggleInput.addEventListener("change", debouncedGenerateImage);
promodsToggleInput.addEventListener("change", debouncedGenerateImage);
dbusworldToggleInput.addEventListener("change", debouncedGenerateImage);
customTitleInput.addEventListener("input", debouncedGenerateImage);
loadDefaultCountry();
updateForm();
updateLanguage(currentLanguage);
debouncedGenerateImage();
</script>
</body>
</html>
